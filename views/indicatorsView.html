
<style>
    html, body {
        height: 98.5%;
        background-color: #eeeeee;
    }
    .info {
        background-color: #fff;
        border: 2px #444 solid;
        border-radius: 7px;
        -webkit-box-shadow: 4px 4px 5px 0px rgba(50, 50, 50, 0.75);
        -moz-box-shadow:    4px 4px 5px 0px rgba(50, 50, 50, 0.75);
        box-shadow:         4px 4px 5px 0px rgba(50, 50, 50, 0.75);
        color: #111;
        font-size: 13px;
        position: absolute;
        bottom:30em;
        left: 15em;
        z-index: 100;
        font-weight: bold;
        padding: .2em .5em;
        white-space: nowrap;
        line-height: 1.1em;
        text-align: center;
        z-index: 100;
    }
    .info:before {
        border-top: 6px solid transparent;
        border-bottom: 6px solid transparent;
        content: "";
        border-right: 6px solid black;
        border-right-color: inherit;
        position: absolute;
        left: -8px;
        top: 20px;
    }

    .infoh {
        background-color: #fff;
        border: 2px #444 solid;
        border-radius: 7px;
        -webkit-box-shadow: 4px 4px 5px 0px rgba(50, 50, 50, 0.75);
        -moz-box-shadow:    4px 4px 5px 0px rgba(50, 50, 50, 0.75);
        box-shadow:         4px 4px 5px 0px rgba(50, 50, 50, 0.75);
        color: #111;
        font-size: 9px;
        position: absolute;
        bottom:1.5em;
        left: 2em;
        z-index: 100;
        font-weight: bold;
        padding: .2em .5em;
        white-space: nowrap;
        line-height: 1.1em;
        text-align: center;
        z-index: 100;
    }

    .infopop {
        background-color: #fff;
        border: 2px #444 solid;
        border-radius: 7px;
        -webkit-box-shadow: 4px 4px 5px 0px rgba(50, 50, 50, 0.75);
        -moz-box-shadow:    4px 4px 5px 0px rgba(50, 50, 50, 0.75);
        box-shadow:         4px 4px 5px 0px rgba(50, 50, 50, 0.75);
        color: #111;
        font-size: 9px;
        position: absolute;
        bottom:1.5em;
        left: 16em;
        z-index: 100;
        font-weight: bold;
        padding: .2em .5em;
        white-space: nowrap;
        line-height: 1.1em;
        text-align: center;
        z-index: 100;
    }

    .infoh:before {
        /*border-top: 6px solid transparent;*/
        /*border-bottom: 6px solid transparent;*/
        /*content: "";*/
        /*border-right: 6px solid black;*/
        /*border-right-color: inherit;*/
        /*position: absolute;*/
        /*left: -8px;*/
        /*top: 20px;*/
    }

    tr td{
        text-align:center;
        padding:2px;
    }

    tr td b{
        text-align:right!important;
    }

    td.header_style{
        text-align: left;
    }

    .not_found{
        height:100%;
        /*margin-bottom: 50px;*/
    }
    .default{
        height:568px;

    }

    .success{
        color: green!important;
        font-weight: bolder!important;
        background-color: #00bfa5!important;
    }

    .failed{
        color: red;
        font-weight: bolder!important;
        background-color: #bf360c!important;
    }

    .chart-options {
        position: absolute;
        /*visibility:hidden;*/
        height: 100%;
        width: 35px;
        right: 0;
        top:0;
        /*z-index: 500;*/
        padding-top: 25px;
        padding-right: 2px;
        background-color: transparent;
        -webkit-transition: all .2s ease-in-out;
        -moz-transition: all .2s ease-in-out;
        -o-transition: all .2s ease-in-out;
        -ms-transition: all .2s ease-in-out;
        transition: all .2s ease-in-out;
    }

    .chart-options ul > li > a {
        cursor: pointer;
        /*!*padding-left: 5px;*!*/
        /*padding-top: 5px;*/
        /*font-size: 10px;*/
        /*height: 30px;*/
        /*width: 30px;*/
        /*border: solid 1px #ddd;*/
        /*border-radius: 15px;*/
        /*background-color: #ddd;*/
        /*-webkit-transition: all .2s ease-in-out;*/
        /*-moz-transition: all .2s ease-in-out;*/
        /*-o-transition: all .2s ease-in-out;*/
        /*-ms-transition: all .2s ease-in-out;*/
        /*transition: all .2s ease-in-out;*/
        /*margin-bottom: 2px;*/
    }

    .chart-options ul > li > a:hover {
        -webkit-transform: scale(1.2);
        -moz-transform: scale(1.2);
        -o-transform: scale(1.2);
        -ms-transform: scale(1.2);
        transform: scale(1.2);
    }

    .chart-option-icon {
        margin: auto;
        height: 18px;
        width: 18px;
        opacity: 0.9;
    }
    .chart-option-icon:hover {
        margin: auto;
        height: 20px;
        width: 20px;
        opacity: 1;
    }
    .active-type {
        background-color: #cecece !important;
    }

</style>
<div class="row" >
    <h5 class="center">{{ getCurrentSection() }} : {{ getOrgUnitName($root.selectedOrgUnit) }} - {{ getPeriodName($root.selectedPeriod) }}</h5>
    <div class="col s2 hide-on-med-and-down" style="padding: 0px" >
        <div class="section">
            <div>
                <div class=" card z-depth-2 white lighten-5 hide-on-med-and-down" style="overflow: visible;height: 320px">
                    <div class="card-content">
                        <span class="card-title activator grey-text text-darken-4">FILTERS<i class="material-icons right small">keyboard_arrow_left</i></span>
                        <div class="section">
                            <div class="input-field col s12 grey lighten-5">
                                <select ng-model="$root.periodType" material-select watch ng-change="$root.changePeriodType()">
                                    <option value="years">Yearly</option>
                                    <option value="quarters">Quarterly</option>
                                </select>
                                <label>Period Type</label>
                            </div>
                            <div class="input-field col s12 grey lighten-5" ng-if="$root.periodType == 'years'">
                                <select ng-model="$root.selectedPeriod" ng-change="$root.firstClick()" material-select watch>
                                    <option value="2017">2017</option>
                                    <option value="2016">2016</option>
                                    <option value="2015">2015</option>
,,,                                 <option value="2014">2014</option>
                                </select>
                                <label>Period</label>
                            </div>
                            <div class="input-field col s12 grey lighten-5" ng-if="$root.periodType == 'quarters'">
                                <select ng-model="$root.selectedPeriod" ng-change="$root.firstClick()" material-select watch>
                                    <option value="2014Q1">Jan - Mar 2014</option>
                                    <option value="2014Q2">Apr - Jun 2014</option>
                                    <option value="2014Q3">Jul - Sep 2014</option>
                                    <option value="2014Q4">Oct - Dec 2014</option>
                                    <option value="2015Q1">Jan - Mar 2015</option>
                                    <option value="2015Q2">Apr - Jun 2015</option>
                                    <option value="2015Q3">Jul - Sep 2015</option>
                                    <option value="2015Q4">Oct - Dec 2015</option>
                                    <option value="2016Q1">Jan - Mar 2016</option>
                                    <option value="2016Q2">Apr - Jun 2016</option>
                                    <option value="2016Q3">Jul - Sep 2016</option>
                                    <option value="2016Q4">Oct - Dec 2016</option>
                                    <option value="2017Q1">Jan - Mar 2017</option>
                                    <option value="2017Q2">Apr - Jun 2017</option>
                                </select>
                                <label>Period</label>
                            </div>
                        </div>
                        <div class="section">
                            <div class="input-field col s12 orgDropdown1" >

                                <label>Regions</label>
                            </div>
                        </div>
                    </div>
                    <div class="card-reveal">
                        <span class="card-title grey-text text-darken-4">FILTERS<i class="material-icons right">close</i></span>
                        <p class="flow-text">Use This section to filter the results</p>
                    </div>
                </div>
                <script>
                    var orgUnits1=[{"id":"YtVMnut7Foe","name":"Arusha Region"},{"id":"acZHYslyJLt","name":"Dar Es Salaam Region"},{"id":"Cpd5l15XxwA","name":"Dodoma Region"},{"id":"MAL4cfZoFhJ","name":"Geita Region"},{"id":"sWOWPBvwNY2","name":"Iringa Region"},{"id":"Crkg9BoUo5w","name":"Kagera Region"},{"id":"DWSo42hunXH","name":"Katavi Region"},{"id":"RD96nI1JXVV","name":"Kigoma Region"},{"id":"lnOyHhoLzre","name":"Kilimanjaro Region"},{"id":"VMgrQWSVIYn","name":"Lindi Region"},{"id":"qg5ySBw9X5l","name":"Manyara Region"},{"id":"vYT08q7Wo33","name":"Mara Region"},{"id":"A3b5mw8DJYC","name":"Mbeya Region"},{"id":"Sj50oz9EHvD","name":"Morogoro Region"},{"id":"bN5q5k5DgLA","name":"Mtwara Region"},{"id":"hAFRrgDK0fy","name":"Mwanza Region"},{"id":"qarQhOt2OEh","name":"Njombe Region"},{"id":"yyW17iCz9As","name":"Pwani Region"},{"id":"vAtZ8a924Lx","name":"Rukwa Region"},{"id":"ZYYX8Q9SGoV","name":"Ruvuma Region"},{"id":"EO3Ps3ny0Nr","name":"Shinyanga Region"},{"id":"IgTAEKMqKRe","name":"Simiyu Region"},{"id":"LGTVRhKSn1V","name":"Singida Region"},{"id":"kZ6RlMnt2bp","name":"Tabora Region"},{"id":"vU0Qt1A5IDz","name":"Tanga Region"}];
                    var dropdown1 = "<select  material-select watch class='changeOrgUnit' ng-model='$root.selectedOrgUnit'  ng-change='$root.firstClick()'>"
                    dropdown1 += "<option value='m0frOspS7JY'>MOH Tanzania</option>"
                    $.each(orgUnits1,function(key,orgUnit){
                        dropdown1 += "<option value='"+orgUnit.id+"'> "+orgUnit.name+"</option>";
                    });
                    dropdown1 += "</select>";
                    $(".orgDropdown1").html(dropdown1);
                </script>
            </div>
        </div>
    </div>
    <div class="col s12 hide-on-large-only" >
        <div class="section">
            <div class="input-field col s4 grey lighten-5">
                <select ng-model="$root.periodType" material-select watch ng-change="$root.changePeriodType()">
                    <option value="years">Yearly</option>
                    <option value="quarters">Quarterly</option>
                </select>
                <label>Period Type</label>
            </div>
            <div class="input-field col s4 grey lighten-5" ng-if="$root.periodType == 'years'">
                <select ng-model="$root.selectedPeriod" ng-change="$root.firstClick()" material-select watch>
                    <option value="2016">2016</option>
                    <option value="2015">2015</option>
                    <option value="2015">2015</option>
                </select>
                <label>Period</label>
            </div>
            <div class="input-field col s4 grey lighten-5" ng-if="$root.periodType == 'quarters'">
                <select ng-model="$root.selectedPeriod" ng-change="$root.firstClick()" material-select watch>
                    <option value="2014Q1">Jan - Mar 2014</option>
                    <option value="2014Q2">Apr - Jun 2014</option>
                    <option value="2014Q3">Jul - Sep 2014</option>
                    <option value="2014Q4">Oct - Dec 2014</option>
                    <option value="2015Q1">Jan - Mar 2015</option>
                    <option value="2015Q2">Apr - Jun 2015</option>
                    <option value="2015Q3">Jul - Sep 2015</option>
                    <option value="2015Q4">Oct - Dec 2015</option>
                    <option value="2016Q1">Jan - Mar 2016</option>
                    <option value="2016Q2">Apr - Jun 2016</option>
                    <option value="2016Q3">Jul - Sep 2016</option>
                    <option value="2016Q4">Oct - Dec 2016</option>
                </select>
                <label>Period</label>
            </div>
            <div class="input-field col s4 orgDropdown grey lighten-5"  id="orgDropdown" >
                <label>Regions</label>
            </div>
        </div>
    </div>

    <script>
        var orgUnits=[{"id":"YtVMnut7Foe","name":"Arusha Region"},{"id":"acZHYslyJLt","name":"Dar Es Salaam Region"},{"id":"Cpd5l15XxwA","name":"Dodoma Region"},{"id":"MAL4cfZoFhJ","name":"Geita Region"},{"id":"sWOWPBvwNY2","name":"Iringa Region"},{"id":"Crkg9BoUo5w","name":"Kagera Region"},{"id":"DWSo42hunXH","name":"Katavi Region"},{"id":"RD96nI1JXVV","name":"Kigoma Region"},{"id":"lnOyHhoLzre","name":"Kilimanjaro Region"},{"id":"VMgrQWSVIYn","name":"Lindi Region"},{"id":"qg5ySBw9X5l","name":"Manyara Region"},{"id":"vYT08q7Wo33","name":"Mara Region"},{"id":"A3b5mw8DJYC","name":"Mbeya Region"},{"id":"Sj50oz9EHvD","name":"Morogoro Region"},{"id":"bN5q5k5DgLA","name":"Mtwara Region"},{"id":"hAFRrgDK0fy","name":"Mwanza Region"},{"id":"qarQhOt2OEh","name":"Njombe Region"},{"id":"yyW17iCz9As","name":"Pwani Region"},{"id":"vAtZ8a924Lx","name":"Rukwa Region"},{"id":"ZYYX8Q9SGoV","name":"Ruvuma Region"},{"id":"EO3Ps3ny0Nr","name":"Shinyanga Region"},{"id":"IgTAEKMqKRe","name":"Simiyu Region"},{"id":"LGTVRhKSn1V","name":"Singida Region"},{"id":"kZ6RlMnt2bp","name":"Tabora Region"},{"id":"vU0Qt1A5IDz","name":"Tanga Region"}];
        var dropdown = "<select  material-select watch class='changeOrgUnit' ng-model='$root.selectedOrgUnit'  ng-change='$root.firstClick()'>"
        dropdown += "<option value='m0frOspS7JY'>MOH Tanzania</option>"
        $.each(orgUnits,function(key,orgUnit){
            dropdown += "<option value='"+orgUnit.id+"'> "+orgUnit.name+"</option>";
        });
        dropdown += "</select>";
        $(".orgDropdown").html(dropdown);
    </script>

    <div class="col s12 m12 l10" style="padding-left: 0px">
        <div class="section">
            <div class="{{ card.cardClass }}" ng-repeat="card in cards.data" style="padding-right: 0px">
                <div class="card z-depth-2 teal lighten-5 large">
                    <div class="card-image waves-effect waves-block waves-light" style="overflow: scroll">
                        <div style="width: 100%" ng-mouseover="showIcons(card)" ng-mouseleave="hideIcons(card)">
                            <highchart ng-if="!card.displayTable && !card.displayMap && !card.displayColumn" config="card.chartObject"></highchart>
                            <div id="{{ card.data }}" ng-show="card.displayColumn" style="margin: 0 auto"></div>

                            <div class="chart-options" ng-if="card.showicons && !card.displayTable && !card.displayMap && !card.displayColumn">
                                <ul class="nav nav-stacked">
                                    <li ng-repeat="chartType in card.icons" style="padding-top: 6px;padding-bottom: 6px">
                                        <a ng-click="changeChart(chartType.name,card)" title="{{chartType.name}}" ng-class="{'active-type': card.chart == chartType.type }">
                                            <img ng-src="{{'assets/img/'+chartType.image}}" class="chart-option-icon" alt="" style="width: 20px!important;">
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>

                        <div style="width: 100%" ng-if="card.displayMap">
                            <!--<p ng-if="card.chartObject.loading" class="center"><img src="assets/img/loading.gif">Loading ....</p>-->
                            <p ng-if="!card.layers" class="center">Loading ....</p>
                            <openlayers ng-if="card.layers" ol-center="card.Africa" ol-defaults="card.defaults" custom-layers="true"  height="400px" >
                                <ol-layer ol-layer-properties="layer" name="test" ng-repeat="layer in card.layers"></ol-layer>
                            </openlayers>
                            <div id="districtboxz"  class="infoh district ">
                                <table>
                                    <caption>Key</caption>
                                    <tr ng-repeat="leg in card.legend"><td style="background-color: {{leg.color}}">&nbsp;</td><td  style="text-align: left;">{{leg.set}}</td><td> ({{leg.members}})</td></tr>
                                </table>
                            </div>
                            <div id="districtbox"  class="infopop district " ng-if="card.selectedDistrictHover">
                                <table>
                                    <tr><td>{{card.selectedDistrictHover.name}}</td></tr>
                                    <tr><td>{{card.selectedDistrictHover.indicatorValue}}</td></tr>
                                </table>
                            </div>

                        </div>

                        <div style="width: 100%" ng-if="card.displayTable" >
                            <p ng-if="card.chartObject.loading" class="center"><img src="assets/img/loading.gif">Loading ....</p>
                            <h5 class="center">{{ card.title }}</h5>
                            <div ng-bind-html="card.table"></div>
                        </div>

                    </div>
                    <div class="card-content">
                        <p>
                            <a ng-click="changeChart('table',card)"  title="Table" class="waves-effect waves-light btn teal darken-2" >Table</a>
                            <a ng-click="changeChart(card.default_chart,card)"  title="Chart" class="waves-effect waves-light btn teal darken-2" >Chart</a>
                            <!--<a ng-click="changeChart('map',card)"  title="Chart" class="waves-effect waves-light btn teal darken-2" >Map</a>-->
                            <button class="waves-effect waves-light btn teal darken-2" ng-csv="prepareDataForCSV(card)" csv-label="true" filename="data.csv" field-separator="," decimal-separator=".">CSV</button>
                            <span class="card-title activator grey-text text-darken-4" style="font-size: 18px;"><i class="material-icons mdi-action-info-outline right" style="font-size: 38px;color: #0059bc;margin-top:10px"></i></span>
                            <!--<span style="" ng-if="cardCtrl.dataobject.showLoader">Please Wait, {{ cardCtrl.dataobject.loadingMessage }}</span>-->
                        </p>
                        <p>
                            <!--<a ng-click="changeChart(icon.name,card)" ng-repeat="icon in card.icons" title="{{ icon.name }}" class="btn-floating btn-small waves-effect waves-light teal darken-2" style="padding-top: 5px;padding-left: 8px"><img src="assets/img/{{icon.image}}" style="height: 20px;width: 20px"/></i></a>-->
                            <!--<a ng-csv="prepareDataForCSV(card)" csv-label="true" filename="data.csv" field-separator="," decimal-separator="."  title="Download Excel" class="btn-floating btn-small waves-effect waves-light teal darken-2" style="padding-top: 5px;padding-left: 8px"><img src="assets/img/cvs.jpg" style="height: 20px;width: 20px"/></i></a>-->
                            <!--<a class="btn-floating btn-small waves-effect waves-light teal darken-2 right" modal href="#link{{ card.data }}"><i class="material-icons mdi-action-info-outline right" style="font-size: 34px;color: #0059bc"></i></a>-->
                            <!--<strong><div class="small switch right"><label><b>Hide Parent</b><input type="checkbox" ng-model="checkbox" ng-click="updateParent(card,checkbox)"><span class="lever"></span>Show Parent</label></div></strong>-->
                             <!--<a class="btn modal-trigger waves-effect waves-block waves-light" href='#demoModal' modal>Show Modal</a>-->
                         </p>
                    </div>
                    <div class="card-reveal">
                        <span class="card-title grey-text text-darken-4">{{ card.title }}<i class="material-icons right">close</i></span>
                            <p class="flow-text" ng-if="card.indicatorType.name"><b>Name:</b>&nbsp;&nbsp;{{ card.indicatorType.name }}</p>
                            <p class="flow-text" ng-if="card.indicatorType.numeratorDescription"><b>Numerator Description:</b>&nbsp;&nbsp;{{ card.indicatorType.numeratorDescription }}</p>
                            <p class="flow-text" ng-if="card.indicatorType.denominatorDescription"><b>Denominator Description:</b>&nbsp;&nbsp;{{ card.indicatorType.denominatorDescription }}</p>
                            <p class="flow-text" ng-if="card.indicatorType.indicatorType.name"><b>Indicator Type:</b> &nbsp;&nbsp;{{card.indicatorType.indicatorType.name}}</p>
                            <p class="flow-text" ng-if="card.numerator"><b>Numerator Formula:</b> &nbsp;&nbsp;{{card.numerator}}</p>
                            <p class="flow-text" ng-if="card.denominator"><b>Denominator Formula:</b> &nbsp;&nbsp;{{card.denominator}}</p>
                            <ul ng-repeat="dataset in card.indicatorType.dataSets">
                                <li class="flow-text" ng-if="dataset.name"><b>Data Set Name</b>:&nbsp;&nbsp;{{dataset.name}}</li>
                                <li class="flow-text" ng-if="dataset.periodType"><b>Data Set Period Type</b>:&nbsp;&nbsp;{{dataset.periodType}}</li>
                            </ul>
                     </div>
                </div>

                <!--Model object for the card-->
                <div id="link{{ card.data }}" class="modal" style="border-radius: 10px;width: 90%;max-height: 100%">
                    <div class="modal-content">
                        <h4 style="text-align: center">{{ card.title }}</h4>
                        <div style="width: 100%">
                            <highchart style="width: 86%" ng-if="!card.displayTable && !card.displayMap && !card.displayColumn" config="card.chartObject"></highchart>
                            <div id="c{{ card.data }}" ng-show="card.displayColumn" style="margin: 0 auto;width: 86%"></div>

                            <div style="width: 100%" ng-if="card.displayTable" >
                                <p ng-if="card.chartObject.loading" class="center"><img src="assets/img/loading.gif">Loading ....</p>
                                <h5 class="center">{{ card.title }}</h5>
                                <div ng-bind-html="card.table"></div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class=" modal-action modal-close waves-effect waves-green btn-flat">Close</button>
                    </div>
                </div>
                <!--end of model object-->
            </div>
        </div>
    </div>
</div>
