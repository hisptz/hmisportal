<div class="card"  (mouseenter)="setOptions(true,indicator)" (mouseleave)="setOptions(false,indicator)">
  <div class="card-body">

    <div class="lead" *ngIf="indicator.loading">
      <h3 class="lead text-center">{{indicator.title}}</h3>
      <app-placeholder [loadingMessage]="'Getting '+ selected_ou_name + ' ' + indicator.title + ' data ...'"></app-placeholder>
    </div>
    <app-metadata-dictionary
      [metadataidentifiers]="indicator.identifiers"
      *ngIf="!indicator.loading && indicator.visualizerType == 'info' && !indicator.hasError"
    ></app-metadata-dictionary>
    <div *ngIf="!indicator.loading && indicator.visualizerType == 'chart' && !indicator.hasError" [ng2-highcharts]="indicator.chartObject"></div>
    <div *ngIf="!indicator.loading && indicator.visualizerType == 'table' && !indicator.hasError">
      <app-table-template [tableObject]="indicator.tableObject"></app-table-template>
    </div>


    <div class="options-block" *ngIf="indicator.showOptions && indicator.visualizerType == 'chart' && !indicator.hasError">
      <ul class="nav nav-stacked">
        <li *ngFor="let chartType of chartTypes">
          <a
            (click)="updateChartType(chartType.type, indicator)"
            title="{{chartType.description}}"
            [ngClass]="{ 'chart-active': (indicator.chart == chartType.type) }"
          >
            <img [src]="chartType.icon" class="chart-option-icon" alt="">
          </a>
        </li>
      </ul>
    </div>

    <!--error handling-->
    <div class="lead text-warning" *ngIf="indicator.hasError">
      <i class="fa fa-warning"></i> Sorry, something went wrong while fetching data! make sure you have internet connection and  try to reload the page
    </div>
  </div>

  <div class="card-footer text-muted" style="margin-right: 5px">
    <button class="btn btn-sm cursor"
            [ngClass]="{ 'btn-outline-success': (indicator.visualizerType != 'table'),'btn-secondary':(indicator.visualizerType == 'table') }"
            (click)="updateType('table', indicator)">
      <i class="fa fa-table"></i> Table
    </button>
    <button class="btn btn-sm cursor"
            [ngClass]="{ 'btn-outline-success': (indicator.visualizerType != 'chart'),'btn-secondary':(indicator.visualizerType == 'chart') }"
            (click)="updateType('chart', indicator)">
      <img [src]="'assets/img/'+indicator.chart+'.png'" class="chart-option-icon" alt="" style="margin: 0px">
      Chart
    </button>
    <a class="btn btn-outline-success btn-sm cursor"  href="{{indicator.csv}}">
      <i class="fa fa-file-excel-o"></i> Excel
    </a>
    <a
      class="btn btn-sm pull-right cursor"
      (click)="updateType('info', indicator)"
      [ngClass]="{ 'btn-outline-info': (indicator.visualizerType != 'info'),'btn-secondary':(indicator.visualizerType == 'info') }"
    >
      <i class="fa fa-info-circle" [ngClass]="{ 'text-white':(indicator.visualizerType == 'info') }"></i>
    </a>
    <footer class="blockquote-footer">
      <small style="font-size: 8px">This data is not for Publication it is used for administrative purpose only, to get data for publication contact  <cite title="Source Title">Permanent secretary ministry of health</cite></small>
    </footer>
  </div>
</div>
